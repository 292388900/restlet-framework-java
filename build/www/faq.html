<html>
<head>
 <style type="text/css">
/* <![CDATA[ */
@import "http://www.restlet.org/stylesheets/tigris.css";
/*  ]]> */
 </style>
 <title>Restlet - Frequently Asked Questions</title>
</head>
<body>

<a target="_top" href="http://www.restlet.org"><img src="http://www.restlet.org/images/logo200"/></a><br/>

<br/>

<h1>Frequently Asked Questions</h1>

<h3><a name="toc">Table of contents</a></h3>
<p>
   <ol>
      <li><a href="#01">Why do I need a framework for REST?</a></li>
      <li><a href="#02">What are the underlying concepts?</a></li>
      <li><a href="#03">What are the advantages of using Restlets instead of Servlets?</a></li>
      <li><a href="#04">I have general questions about REST, where can I get help?</a></li>
      <li><a href="#05">How can I get the raw HTTP headers if I really need to?</a></li>
      <li><a href="#06">Can I run Restlets inside Tomcat or any Servlet container?</a></li>
      <li><a href="#07">Can the Restlets composing a site be defined in an XML file?</a></li>
      <li><a href="#08">What JAR files must I have in my classpath for a minimal application?</a></li>
      <li><a href="#09">What are the other JAR files for?</a></li>
      <li><a href="#10">Why are there two Jetty versions provided?</a></li>
      <li><a href="#11">How do I provide password protection on a server?</a></li>
      <li><a href="#12">How do I check the mime type of a document PUT on my server?</a></li>
      <li><a href="#13">How do I attach a status report to a client GET when the call fails on my server?</a></li>
      <li><a href="#14">What about performance, are new Restlets created for each call received on my server?</a></li>
      <li><a href="#15">How do I implement the traditional MVC pattern?</a></li>
      <li><a href="#16">Any recommendations/guidelines in terms of how to deal with caching?</a></li>
      <li><a href="#17">What is the performance of the HTTP connectors?</a></li>
      <li><a href="#18">Why is my HTTP client sending unwanted "application/x-www-form-urlencoded" content type headers?</a></li>
      <li><a href="#19">Can a Filter modify the call like a Servlet Filter?</a></li>
      <li><a href="#20">My server is running behind a proxy, can I get the actual client IP address?</a></li>
      <li><a href="#21">Is there a mechanism to pass data sets to downstream Restlets?</a></li>
      <li><a href="#22">What is the difference between a Filter and a Router?</a></li>
      <li><a href="#23">How can I send and receive files with Restlets?</a></li>
      <li><a href="#24">How can I make PUT or DELETE calls from browsers?</a></li>
      <li><a href="#25">What's the best practice for error handling in an intermediate Restlet?</a></li>
      <li><a href="#26">What is the best way to use Restlets in Eclipse?</a></li>
   </ol>
</p>

<h3><a name="01">1. Why do I need a framework for REST?</a></h3>

<p>
   The goal of a framework is to provide a reusable and extendable set of classes and interfaces that will serve as a foundation on which you can construct your own applications more efficiently. The Restlet project was started from the observation that no Java framework was available to help developers build RESTful applications.<br/>
   <br/>
   First, it's important that you familiarize yourself with the <a href="#21">REST architecture style</a>. Then you will realize that the Restlet API derived the name of its classes directly from the REST concepts (resource, representation, connector, component, media type, language, etc.). This means that you are able to think RESTfully and to translate your solution into code more naturally.<br/><br/>
   If you are not familiar with REST yet, you still gain the protocol abstraction provided by Restlets: the same set of interfaces is usable for multiple protocols (HTTP server, HTTP client, SMTP client, JDBC client, file system...). For example, you don't need to know the HTTP headers to do content negotiation. Also, you don't need to use and learn multiple APIs (Servlet, HttpUrlConnection and JavaMail for example) to implement standard Web applications.
</p>

<h3><a name="02">2. What are the underlying concepts?</a></h3>

<p>
   As the name of the project implies it, the Restlet class is the central concept to understand. It implements a RESTful uniform interface that is implemented by connectors, containers, applications, handlers, etc. It contains a single "public void handle(Request request, Response)" method which is the contract respected by all parts of the framework.<br/>
   <br/>
   Then, the Request and Response classes are important as they encapsulate all aspects of a RESTful call, in a protocol neutral way. All REST concepts were implemented, trying to use the REST name as the name of the equivalent Java interface. Some specialized Restlets like Application, Chainer, Filter, Handler, Router and Scorer were added to facilitate the processing of calls, like in the case of Handler to locate the target resource identified by hierarchical URIs.
   <br/>
   The processing of REST calls is typically done in two phases. During the first one, the call is processed by a chain of Restlets in order to filter it (like for security purpose or to extract variables from URI parts) to a locate a the target Resource of the call, as identified by the URI. The Handler class is the last Restlet in the processing chain, responsible to actually find a Resource instance based on the processed request information. Once this phase is over, the actual processing can take place in the target Resource class, or more likely one of its subclasses that you will have created. The concepts of Resource and Representation are really central to REST and therefore to the Restlet API. A single Resource can expose several Representations, in different format, languages, etc. In order to help you return the best Representation of your Resources, an automatic and transparent content negotiation algorithm is used.
</p>

<h3><a name="03">3. What are the advantages of using Restlets instead of Servlets?</a></h3>

<p>
   There are many advantages, but the main one is that Restlet strictly follows the REST architecture style as defined by Roy T. Fielding, co-author of the HTTP protocol. This ensures that your application can easily be developed in a RESTful manner. Each concept of REST has a corresponding Java class in the Restlet API. Also, Restlet removed the concepts of in-memory user sessions which are not RESTful and are a major bottleneck for availability and scalability of Servlet applications.<br/>
   <br/>
   Another advantage is the ability to work with multiple protocols (HTTP, JDBC, SMTP, etc.) using the exact same API. This is true for both client-side
   and server-side application. In addition, a Restlet Application can be a client and a server at the same time. It's a truly Web centric framework. If you compare it to the Servlet API, it's an HTTP-only API with support for server-side code. To do client-side code, you need to rely on
   the low-level HttpURLConnection class from the JDK which uses a completely different API or on the Apache HTTP Client project.<br/>
   <br/>
   Also, the Restlet API is cleanly separating the low-level protocol aspects from the application aspects. For most application, you won't need to
   access to HTTP headers to get the media type of a request, you just use request.getEntity().getMediaType(). This separation enables the protocol connectors to implement any optimization they need without interferring with the application code. With Servlets, everything is mixed as applications can directly modify the HTTP headers and take control of the output stream.<br/>
   <br/>
   In addition, via the use of Routers and Scorers, the Restlet API gives full control of the call handling to developers. In the Servlet world, the standard approach is to configure the URI mappings in the configuration file of the container, which is not as flexible. There is always the possibility to manually handle the dispatching or to rely on third-party frameworks like Struts or Spring, but it is really not as convenient and powerful as the integrated support provided by the Restlet API.<br/>
   <br/>
   Finally, the Restlet API is I/O agnostic as its core Representation interface can work equally well with BIO streams (java.io package) and NIO channels (java.nio package). This brings the potential of significant performance boosts when fully NIO compliant connectors will become available. The main advantage will be the increase scalability by removing the need to associate one thread for each opened connection which is a major bottleneck in current Servlet containers.
</p>

<h3><a name="04">4. I have general questions about REST, where can I get help?</a></h3>

<p>
   There are many resources available on the Web. Here is a selection of the best links:
   <ul>
      <li><a href="http://en.wikipedia.org/wiki/REST">REST page on Wikipedia</a></li>
      <li><a href="http://naeblis.cx/articles/2004/12/12/rest-to-my-wife">How I explained REST to my wife...</a></li>
      <li>Thesis chapter defining REST: <a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm">English version</a>, <a href="http://opikanoba.org/tr/fielding/rest/">French translation</a></li>
      <li>Architecture of the World Wide Web: <a href="http://www.w3.org/2001/tag/webarch/">English version</a>, <a href="http://opikanoba.org/tr/w3c/webarch/">French translation</a></li>
      <li><a href="http://www.prescod.net/rest/">REST Resources of Paul Prescod</a></li>
      <li><a href="http://www.xfront.com/REST-Web-Services.html">Building Web Services the REST Way</a></li>
      <li><a href="http://rest.blueoxen.net">REST Wiki</a>, including a <a href="http://rest.blueoxen.net/cgi-bin/wiki.pl?RestFaq">FAQ</a></li>
      <li><a href="http://groups.yahoo.com/group/rest-discuss/">REST discussion mailing list</a></li>
      <li><a href="http://www.w3.org/Protocols/rfc2616/rfc2616.html">HTTP 1.1 specification, a common application of REST</a></li>
      <li><a href="http://www.webdav.org/specs/rfc2518.html">WebDAV specification, an extension of HTTP</a></li>
   </ul>
   In addition, you are always welcome to post your questions on the <a href="http://www.restlet.org/discuss">Restlet mailing list</a>.
</p>

<h3><a name="05">5. How can I get the raw HTTP headers if I really need to?</a></h3>

<p>
   Even though the org.restlet.data.Request and org.restlet.data.Response classes provide a convenient and protocol-neutral way to manipulate the information contained in standard HTTP headers, it is sometimes necessary to access to the raw header values or to add non-standard headers. For this purpose, we use special request and response attributes, see details in Javadocs of the <a href="http://www.restlet.org/docs/api/index.html?org/restlet/data/Message.html#getAttributes()">Message.getAttributes() method</a>. There is also a sample code in the distribution that illustrates how to get raw headers and how to add non-standard ones, see the com.noelios.restlet.example.misc.HeadersTest class in the "src" directory.
</p>

<h3><a name="06">6. Can I run Restlets inside Tomcat or any Servlet container?</a></h3>

<p>
   Yes you can, even if this is not required. If you can't use the standalone HTTP connectors provided in the Noelios Restlet Engine, you can still use the ServerServlet connector which is an adapter between the Servlet API and the Restlet API. See the <a href="http://www.restlet.org/docs/ext/index.html?com/noelios/restlet/ext/servlet/ServerServlet.html">
   ServerServlet Javadocs</a> for details on how to configure your Servlet container.
</p>

<h3><a name="07">7. Can the Restlets composing a site be defined in an XML file?</a></h3>

<p>
   As XML has been frequently overused as an alternative programming language, in the Restlet framework we are very careful about this. We think that any configuration that must be done by an application developer should be done in Java. In the future, we plan to support XML configuration for the Container as this task will often by delegated to an administrator without Java knowledge. As you can see in our <a href="http://wiki.java.net/bin/view/Javawsxml/Restlet">Community Wiki</a>, several users have integrated Restlet with other frameworks like Spring, which support XML configuration itself.
</p>

<h3><a name="08">8. What JAR files must I have in my classpath for a minimal application?</a></h3>

<p>
   In a Restlet distribution, all JAR files are located under the "lib" directory. The <b>org.restlet.jar</b> file is containing the standard Restlet API.
   Even though you can compile your code with only this JAR file, it is likely that you'll need the additional features provided by the
   various Restlet extensions in the <b>org.restlet.ext.*.jar</b> files. In any case, to run a minimal application, you'll also need an implementation of the API, the core Noelios Restlet Engine contained in <b>com.noelios.restlet.jar</b>.
</p>

<h3><a name="09">9. What are the other JAR files for?</a></h3>

<p>
   The core NRE doesn't contain any connector to receive or send requests. You need to add to your classpath the JAR file of each additional connector needed by your application. Check the "/lib/README.txt" file in the distribution for a detailled list of all the required dependencies. If you want to act as an HTTP server, you can choose between several connectors: four standalone ones based on Jetty, Simple Framework and AsyncWeb, and one embedded if you want to use an existing Servlet container like Tomcat.
</p>
<p>
   There are other extensions to the NRE, like SMTP and JDBC clients. Each one corresponds to a seperate Java package under com.noelios.restlet.ext.* and is packaged as a separate JAR file available under the "lib" directory. For example, if you need to send emails, you must include the following JAR files: /lib/com.noelios.restlet.ext.javamail_1.4.jar (NRE extension) and /lib/javax.mail_1.4/mail.jar (JavaMail).
</p>
<p>
   No further configuration is needed as the NRE runtime will automatically detect the extensions present if the application classpath. This is the reason why you can rely on the standard Restlet API to create connectors, for example: new Server(Protocol.HTTP, 8182, target).
</p>

<h3><a name="10">10. Why are there two Jetty versions provided?</a></h3>

<p>
   The Jetty 5 connector is based on the older and very stable Jetty 5.1 HTTP connector. It has full support for HTTPS and AJP. The Jetty 6 connector is based on a recent stable version of Jetty. As this is a full rewrite of Jetty, it is not as proven yet but is a good default choice.
</p>

<h3><a name="11">11. How do I provide password protection on a server?</a></h3>

<p>
   Currently, the Noelios Restlet Engine supports Basic HTTP and Amazon Web Services authentication schemes. You order to leverage them, use the <a href="http://www.restlet.org/docs/api/index.html?org/restlet/Guard.html">Guard</a> Filter. For details on how to use this Filter, please check the <a href="http://www.restlet.org/tutorial#part09">part 9 of the tutorial</a>.
</p>

<h3><a name="12">12. How do I check the mime type of a document PUT on my server?</a></h3>

<p>
   This is simple: request.getEntity().getMediaType() which returns an instance of the MediaType class. From this instance you can get the
   main and sub types as well as the optional type parameters.
</p>

<h3><a name="13">13. How do I attach a status report to a client GET when the call fails on my server?</a></h3>

<p>
   This is also simple: response.setStatus(Status.CLIENT_ERROR_NOT_FOUND). Of course you have a complete list of options available in the Status
   class, closely following the HTTP and WebDAV conventions.
</p>
<p>
   Finally, a description can be added to the status report to help the client understand the situation and correct its request if needed. For this
   purpose, you can create new instances of the <a href="http://www.restlet.org/docs/api/org/restlet/data/Status.html">Status</a> class instead of using the constants or, more simply, you can use response.setStatus(Status.CLIENT_ERROR_NOT_FOUND, "Your comment goes here").
</p>

<h3><a name="14">14. What about performance, are new Restlets created for each call received on my server?</a></h3>

<p>
   For a server connector such as Jetty HTTP, the main cost of Restlets resides in the creation of the Request and Response objects from the low-level
   HTTP request headers and body. This cost is low and is optimized to parse the required headers only when the application actually needs the
   information.
<p/>
<p>
   For the rest, the Restlet cost happens upon initialization or first call. By default, Restlet objects (including Chainers, Filters, Handlers and Routers) are shared by all calls. As calls are living in separate threads, they can be concurrently processed by the Restlets. You only need
   to be careful when using member variables to store temporary state. If at some point in your application, you need to have state that is specific
   to your call, you should use the Request.getAttributes() or Response.getAttributes() as a modifiable map of attributes. In the final Handler that finds the target Resource of your call, you can also easily create a new Resource instance and assotiate call's specific information to it.
</p>

<h3><a name="15">15. How do I implement the traditional MVC pattern?</a></h3>

<p>
   Here is the basic proposition for implementing the MVC pattern with Restlets:
   <ol>
      <li>Controller == Restlets (mainly Filters, Routers and Handlers). You can visualize the controller as a sort of processing chain, where the last node should be a Hander with all the information necessary to locate the target Resource for the call. This location information can be stored either in the request's attributes map, either in the member variables of a request wrapper (see <a href="http://www.restlet.org/docs/api/org/restlet/util/WrapperRequest.html">org.restlet.WrapperRequest</a>). This last Handler should override the findTarget(Request, Response) method and return an instance of Resource.</li>
      <li>Model == Resource + data objects. Just start from the <a href="http://www.restlet.org/docs/api/org/restlet/resource/Resource.html">org.restlet.resource.Resource class</a> and implement its methods like getVariants(), post(), delete() and put(). The Handler class automatically invokes those methods by implementing the handleGet(), handleHead(), handlePost(), handlePut(), handleDelete() methods for you. For example, you just need to override the getVariants() to benefit from automatic content negotiation. Internally, we rely on the Response.setEntity(Resource, Language) method to trigger this content negotiation, which compares the representations that you make available (named the variants), with the client capabilities and preferences.</li>
      <li>View == Representation. To create new representations for your resources, you can rely on one of the numerous Representation implementation classes (InputRepresentation for example) available in the org.restlet.resource package or in extension packages like for JSON documents, FreeMarker and Velocity templates.</li>
   </ol>
</p>
<h3><a name="16">16 Any recommendations/guidelines in terms of how to deal with caching?</a></h3>

<p>
   Currently, client-side caching is supported via the "conditions" property of Call. See the <a href="http://www.restlet.org/docs/api/org/restlet/data/Conditions.html">
   Conditions</a> class for details. So, the first recommendation is to ensure that you correctly set all the representation metadata for
   your own representations (modification date, expiration date, tag). That will ensure that the server-side negotiation logic (used via the
   Response.setEntity(Resource, Language) method) works optimally.
</p>
<p>
   Then, writing a generic server-side cache is a different story. The recommendation would be to follow the REST style and HTTP specification spirit as
   closely as possible. For full-featured caching, you should look at popular projects like Squid: http://www.squid-cache.org/ or Apache caching modules. These caches can be installed transparently for the clients, as reverse proxies.
</p>

<h3><a name="17">17. What is the performance of the HTTP connectors?</a></h3>

<p>
   For server connectors, the performance will depend on the actual provider used. It would be really interested to do a benchmark comparing the different providers, but we didn't have the resources to do it for now. Also, the results  will vary between the Jetty 5.1 connectors and the Jetty 6.0 one. For the Servlet adapter the performance will vary with the actual Servlet container used and how it is configured.
</p>

<h3><a name="18">18. Why is my HTTP client sending unwanted "application/x-www-form-urlencoded" content type headers?</a></h3>

<p>
   When you do a simple GET with the Restlet HTTP client connector, it appears that an extra "content-type" header is sent to the server, even though
   your call doesn't provide any input content (because you just GET a representation). This is due to a bug in the underlying JDK's HttpURLConnection
   class in JDK 5.0. This was fixed in recent JDK 6.0 builds as indicated in the <a href="http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6369510">bug report</a>. We also asked for a backport of the fix to JDK 5.0 which is now available in JDK 5.0 update 10.
</p>

<h3><a name="19">19. Can a Filter modify the call like a Servlet Filter?</a></h3>

<p>
   Absolutely! What the tutorial only says is that request's base reference should rarely be modified. Beside that, anything else in the request or response objects can be modified, before or after the handling of the call by the attached Restlet.
</p>

<h3><a name="20">20. My server is running behind a proxy, can I get the actual client IP address?</a></h3>

<p>
   The immediate client IP address available is the only that is always available because its based on the underlying protocol connection.
   In HTTP, certain proxies do transfer the original client IP address (or addresses) by using some extra HTTP headers like "X-Forwarded-for". In the recent Restlet versions you can get all this information in a straightforward way. On the ClientInfo class, accessible via the <a href="http://www.restlet.org/docs/api/org/restlet/data/Request.html#getClientInfo()">getClientInfo()</a> method, you have two related methods <a href="http://www.restlet.org/docs/api/org/restlet/data/ClientInfo.html#getAddress()">getAddress()</a> and <a href="http://www.restlet.org/docs/api/org/restlet/data/ClientInfo.html#getAddresses()">getAddresses()</a>. Please check the Javadocs of the HTTP server connectors for details (i.e. context parameter to set) on how to enable the support for the "X-Forwarded-For" header as there are some security risks when using it, especially if you are not controlling the intermediary proxies.
</p>

<h3><a name="21">21. Is there a mechanism to pass data sets to downstream Restlets?</a></h3>

<p>
   Yes, there are multiple mechanisms available. If you need to store state, without any validation logic or behavior, you can use the Request.getAttributes() method which returns a modifiable map object. Otherwise, you can wrap the Request object into a larger one containing the extra properties and methods that you need. For this purpose, you just have to create a subclass of org.restlet.util.WrapperRequest. Then, in one of your handle methods, you can simply wrap the current call instance. Unless you use a common base Restlet you will need to properly cast the call instance in subsequent Restlets in order to access to your wrapper methods.
</p>

<h3><a name="22">22. What is the difference between a Filter and a Router?</a></h3>

<p>
   Filters support some processing before or after the handling of a call by a target Restlet. They are useful for actions like logging, caching, compressing or security checks. The purpose of Routers is to route calls based on some any useful criteria, typically base on the relative target URI. Routers can distribute calls to one or more attached Restlets using intermediary Scorers. A Scorer is a simple Filter where the target Restlet is attached and that can score incoming calls. Depending on the scorers and the routing algorithm used, the Router will select the most appropriate target Restlet to continue the processing of the call. Default scorers based on URI patterns will also update the Request."baseRef" propertybefore actually invoking the selected target Restlet. See also, <a href="#02">this FAQ entry</a> for a comparison of Routers with the Servlet API.
</p>

<h3><a name="23">23. How can I send and receive files with Restlets?</a></h3>

<p>
   To receive large files, from browsers for example, you can rely on the Apache FileUpload project which was integrated as a <a href="http://www.restlet.org/docs/ext/index.html?org/restlet/ext/fileupload/package-summary.html">Restlet Extension</a>. To send a file using the HTTP client connector, just create a new <a href="http://www.restlet.org/docs/api/index.html?org/restlet/resource/FileRepresentation.html">FileRepresentation</a> and set is as the input of your call.
</p>

<h3><a name="24">24. How can I make PUT or DELETE calls from browsers?</a></h3>

<p>
   There are two solutions to this problem. The first one is to tunnel the PUT or DELETE calls through regular POST calls. There is a <a href="http://www.restlet.org/docs/api/index.html?org/restlet/service/TunnelService.html">TunnelService</a> associated with each Application that automatically takes care of it. Also, in the <a href="http://www.onlamp.com/lpt/a/6480">Using REST with Ajax</a> article, the author explains how to directly build the PUT and DELETE methods from a browser using some JavaScript code.
</p>

<h3><a name="25">25. What's the best practice for error handling in an intermediate Restlet?</a></h3>

<p>
   Typically, unexpected exceptions are handled at the Application level, by setting the status to 500 (internal server error). If you want a different status when an exception is thrown, you have to catch it manually at a lower level (inside the handle(Call) or handleGet|Post|etc. method of your intermediary Restlet) and set the desired status on your response.
</p>

<h3><a name="26">26. What is the best way to use Restlets in Eclipse?</a></h3>

<p>
   Of course, you could manually use the JAR files in your Eclipse projects, but the most flexible way is to rely on Eclipse's plug-in infrastructure. Here are some detailed steps to get you started:
   <ol>
      <li>Drop the content of the Restlet's "lib/" directory into Eclipse's plug-in directory</li>
      <li>Restart Eclipse and go into "Help/About Eclipse SDK" menu</li>
      <li>In the new dialog, click on the "Plug-in Details" button</li>
      <li>In the new dialog, you should see the registered plugins, for example under the "Noelios Consulting" provider name</li>
   </ol>
   Now in order to use those plugins:
   <ol>
      <li>Select "New Project" and choose "Plug-in Project"</li>
      <li>Click "Next >", eeter a project name and click "Next >" again</li>
      <li>Disable the plug-in options checkboxes (unless you do need them)</li>
      <li>Click "Finish" and you should see you new project with the plug-in "Overview" panel displayed</li>
      <li>Select the "Dependencies" tab and click "Add..." in the "Required Plug-ins..." section</li>
      <li>Select the plugins you need, start by either "org.restlet", "com.noelios.restlet" or the package name for third-party libraries (Jetty,
Servlet API, etc.).</li>
   </ol>
</p>
<p>
   Now you're done! You can create new classes and import the org.restlet.* packages to work with Restlets. Note, that if you add several server HTTP dependencies, only the first one in the list will be use to create connectors.
</p>
<p>
   Also note that you can't add a dependency to Jetty 5 and Jetty 6 at the same time as it will result in a security exception as you experienced, because they use overlapping package names.
</p>

<p>
   <a href="mailto:contact@noelios.com">J&eacute;r&ocirc;me Louvel</a> (<a target="_top" href="http://blog.noelios.com">blog</a>)<br/>
</p>

<h4>Notes</h4>
<p>
   <ul>
      <li>Thanks to Dave Pawson for drafting the first version of this FAQ.</li>
   </ul>
</p>

<br/>

<small>
   Last modified on 2006-11-21. Copyright &copy; 2005-2006 <a href="mailto:contact@noelios.com">J&eacute;r&ocirc;me Louvel</a>. Restlet is a registered trademark of <a target="_top" href="http://www.noelios.com">Noelios Consulting</a>.
</small>

</body>
</html>
