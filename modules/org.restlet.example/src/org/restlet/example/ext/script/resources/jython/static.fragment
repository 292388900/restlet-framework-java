<%python

# Helper to access the static scope

def getStaticValue(name, getDefaultValue):
	global script

	value = script.staticScope[name]
	if value == None:
		value = getDefaultValue()

		# Note: another thread might have changed our value in the meantime.
		# We'll make sure there is no duplication.

		old = script.staticScope.putIfAbsent(name, value)
		if old != None:
			value = old

	return value

%>